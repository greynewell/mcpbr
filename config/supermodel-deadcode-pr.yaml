# Supermodel Dead Code Detection Benchmark (PR-based ground truth)
#
# Usage:
#   uv run mcpbr run --config config/supermodel-deadcode-pr.yaml
#   uv run mcpbr run --config config/supermodel-deadcode-pr.yaml --mcp-only -t prisma_pr28485
#   uv run mcpbr run --config config/supermodel-deadcode-pr.yaml --baseline-only -n 1

benchmark: "supermodel"
analysis_type: "dead-code"

tasks:
  - id: prisma_pr28485
    repo: prisma/prisma
    pr_number: 28485
    merge_commit: "e12307364896b8ab9b47ac0b9941820ba5070ec6"
    language: typescript
    scope_prefix: "packages"
    description: "Remove dead code from generators"

  - id: typescript_pr56817
    repo: microsoft/TypeScript
    pr_number: 56817
    merge_commit: "752135eb4046fc820006b41b2f621242f77b6c3e"
    language: typescript
    scope_prefix: "src"
    description: "Remove unused exports via Knip -- 30+ exported functions"

  - id: n8n_pr23572
    repo: n8n-io/n8n
    pr_number: 23572
    merge_commit: "ea889bee8990d50fcafa989669288bff549750c4"
    language: typescript
    scope_prefix: "packages"
    description: "Remove Pyodide -- exported functions/classes for Python sandboxing"

supermodel_api_base: "https://staging.api.supermodeltools.com"
supermodel_api_key: null  # Set via SUPERMODEL_API_KEY env var
resolved_threshold: 0.8

mcp_server:
  name: "filesystem"
  command: "npx"
  args: ["-y", "@modelcontextprotocol/server-filesystem", "{workdir}"]

provider: "anthropic"
agent_harness: "claude-code"
model: "claude-sonnet-4-20250514"
timeout_seconds: 600
max_iterations: 30
